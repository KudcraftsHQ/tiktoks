{
    "scripts": {
        "setup": "echo '=== Starting Conductor Workspace Setup ===' && echo \"Workspace: $CONDUCTOR_WORKSPACE_NAME\" && echo \"Port: $CONDUCTOR_PORT\" && echo \"Root: $CONDUCTOR_ROOT_PATH\" && echo '' && echo '[1/8] Installing dependencies...' && bun install && echo '' && echo '[2/8] Copying .env file...' && cp \"$CONDUCTOR_ROOT_PATH/.env\" .env && echo '' && echo '[3/8] Modifying environment variables...' && DB_NAME=\"carousel-master-db-$CONDUCTOR_PORT\" && REDIS_DB=$((CONDUCTOR_PORT % 16)) && sed -i '' -E \"s|^(DATABASE_URL=\\\"?postgres(ql)?://[^/]+/)([^?/\\\"]+)(\\\"?)$|\\1$DB_NAME\\4|g\" .env && sed -i '' -E \"s|^(DATABASE_URL_POOLING=\\\"?postgres(ql)?://[^/]+/)([^?/\\\"]+)(\\\"?)$|\\1$DB_NAME\\4|g\" .env && sed -i '' -E \"s|(REDIS_URL=\\\"?redis://[^/]+)/?[0-9]*|\\1/$REDIS_DB|g\" .env && echo \"✓ Database name set to: $DB_NAME\" && echo \"✓ Redis logical DB set to: $REDIS_DB\" && echo '' && echo '[4/8] Loading environment variables...' && export $(grep -v '^#' .env | xargs) && echo '' && echo '[DEBUG] DATABASE_URL:' && grep '^DATABASE_URL=' .env && echo '' && echo '[5/8] Creating PostgreSQL database...' && createdb \"$DB_NAME\" 2>/dev/null && echo \"✓ Database created: $DB_NAME\" || echo \"⚠ Database already exists, continuing...\" && echo '' && echo '[6/8] Running Prisma migrations...' && bunx prisma migrate deploy && echo '' && echo '[7/8] Syncing production data...' && bun run \"$CONDUCTOR_ROOT_PATH/scripts/conductor-sync-prod-data.ts\" && echo '' && echo '[8/8] Generating Prisma client...' && bunx prisma generate && echo '' && echo '✓ Setup complete!' && echo \"Database: $DB_NAME\" && echo \"Redis DB: $REDIS_DB\" && echo \"Port: $CONDUCTOR_PORT\"",
        "run": "PORT=$CONDUCTOR_PORT bun run dev & bun run worker:dev",
        "archive": "echo '=== Archiving Conductor Workspace ===' && echo \"Workspace: $CONDUCTOR_WORKSPACE_NAME\" && echo \"Port: $CONDUCTOR_PORT\" && echo '' && bun run \"$CONDUCTOR_ROOT_PATH/scripts/conductor-cleanup.ts\" && echo '' && echo '✓ Workspace archived successfully'"
    }
}